{
    "symbol": "BTCUSDT",
    "interval": "60",
    "data_days": 365,
    "train_ratio": 0.8,
    "prediction_horizons": [
        1,
        3,
        5,
        10
    ],
    "model_dir": "models",
    "reports_dir": "reports",
    "plots_dir": "plots",
    "log_level": "INFO",
    "imputation_strategy": "median",
    "existing_config": "...",
    "optimization_settings": {
        "db_pool_size": 10,
        "cache_ttl_seconds": 300,
        "instrument_cache_ttl": 3600,
        "candles_cache_ttl": 60,
        "batch_window_seconds": 0.1,
        "max_parallel_requests": 20,
        "preload_symbols_count": 10,
        "enable_request_batching": true,
        "enable_cache": true
    },

    "ltf_entry_settings": {
        "description": "Настройки для оптимального входа на низких таймфреймах",
        "timeframes": {
            "primary_analysis": "1h",
            "ltf_entry": "5m",
            "level_analysis": "15m"
        },
        "level_detection": {
            "lookback_periods": 50,
            "min_touches": 2,
            "proximity_threshold_pct": 0.3,
            "cluster_threshold_pct": 0.2,
            "max_levels_to_track": 5
        },
        "entry_patterns": {
            "enabled_patterns": [
                "hammer",
                "bullish_engulfing",
                "bearish_engulfing",
                "shooting_star",
                "doji_reversal"
            ],
            "min_pattern_score": 0.7,
            "require_volume_confirmation": true,
            "volume_spike_multiplier": 1.5
        },
        "entry_conditions": {
            "ideal_entry": {
                "require_level": true,
                "require_pattern": true,
                "require_indicator_confirmation": true,
                "min_confidence": 0.65
            },
            "good_entry": {
                "require_level": true,
                "require_pattern": false,
                "require_indicator_confirmation": true,
                "min_confidence": 0.6
            },
            "acceptable_entry": {
                "require_level": true,
                "require_pattern": false,
                "require_indicator_confirmation": false,
                "min_confidence": 0.4
            }
        },
        "signal_aging": {
            "max_age_hours": 4,
            "relaxation_schedule": {
                "0-30_minutes": "ideal_only",
                "30-60_minutes": "good_or_better",
                "60-120_minutes": "acceptable_or_better",
                "120+_minutes": "any_valid"
            },
            "size_reduction": {
                "0-60_minutes": 1.0,
                "60-120_minutes": 0.8,
                "120-180_minutes": 0.6,
                "180+_minutes": 0.5
            }
        },
        "divergence_detection": {
            "enabled": true,
            "lookback_swings": 3,
            "min_swing_distance": 5,
            "rsi_divergence_threshold": 5,
            "macd_divergence_enabled": true
        },
        "market_structure": {
            "analyze_structure": true,
            "swing_detection_bars": 5,
            "trend_bias_multiplier": {
                "with_trend": 1.2,
                "counter_trend": 0.7
            }
        },
        "risk_adjustments": {
            "adverse_movement_threshold_pct": 2.0,
            "cancel_if_moved_against": true,
            "reduce_size_on_late_entry": true,
            "adjust_stops_on_late_entry": true
        },
        "indicator_thresholds": {
            "rsi": {
                "oversold": 30,
                "overbought": 70,
                "neutral_zone": [
                    45,
                    55
                ]
            },
            "stochastic": {
                "oversold": 20,
                "overbought": 80,
                "use_crossovers": true
            },
            "volume": {
                "min_ratio": 0.8,
                "spike_ratio": 1.5
            }
        }
    },
    "trade_settings": {
        "leverage": 10,
        "order_size_type": "percentage",
        "order_size_value": 1.0,
        "min_order_value_usdt": 5.5,
        "grid_total_usdt_allocation": 10.0,
        "roi_stop_loss_pct": 8.0,
        "roi_take_profit_pct": 40.0,
        "use_smart_pricing": true,
        "smart_pricing": {
        "max_spread_pct": 0.5,
        "volume_imbalance_threshold": 2.0,
        "order_book_depth": 10,
        "position_reduction_factor": 0.8,
        "enable_spread_protection": true,
        "enable_volume_analysis": true
    }

},
    "strategy_settings": {
        "signal_confidence_threshold": 0.6,
        "use_trend_filter": true,
        "ema_period": 200,
        "use_adx_filter": true,
        "adx_threshold": 17,
        "use_volatility_filter": true,
        "max_atr_percentage": 30.0,
        "use_aroon_filter": true,
        "use_psar_exit": true,
        "use_btc_trend_filter": false,
        "use_atr_trailing_stop": true,
        "atr_ts_multiplier": 3.0,
        "sl_multiplier": 1.0,
        "tp_multiplier": 1.8,
        "ltf_entry_timeframe": "5m"
    },
    "general_settings": {
        "symbol_selection_mode": "dynamic",
        "dynamic_symbols_count": 200,
        "static_symbol_list": [],
        "symbol_blacklist": [],
        "min_24h_volume_usdt": 1000000,
            "enable_websocket": true,
            "priority_monitoring": {
              "enabled": true,
              "focus_list_size": 40,
              "update_interval_minutes": 15,
              "volatility_threshold_percent": 3.0,
              "volume_spike_ratio": 2.0,
              "atr_spike_ratio": 2.0
            },
            "performance_optimization": {
              "use_adaptive_cache": true,
              "enable_circuit_breakers": true,
              "batch_size": 15,
              "parallel_processing": true,
              "preload_focus_data": true
            },
        "monitoring_interval_seconds": 30
    },
    "feature_weights": {
        "price_to_ema_200_4h": 1.5,
        "EMA_200": 1.3,
        "adx_long_term": 1.2,
        "price_to_ema_200_ratio": 1.4,
        "volume_spike_ratio_4h": 1.5,
        "rsi_14_4h": 1.4,
        "vpt": 1.3,
        "price_to_ema_200_1d": 1.2,
        "rsi_14_1d": 1.1,
        "volume_spike_ratio_1d": 1.1,
        "ema_50": 1.1,
        "volatility_20": 1.1,
        "AROONOSC_14_1H": 1.2,
        "rsi_14_15m": 0.5,
        "price_to_ema_200_30m": 0.6
    },
    "shadow_trading": {
        "enabled": true,
        "use_enhanced_config": true,
        "config_file": "config/enhanced_shadow_trading_config.json"
    },
    "filters": {
        "btc_trend_filter": {
            "enabled": false,
            "correlation_threshold": 0.95
        }
    },
    "stop_and_reverse_strategy": {
        "enabled": true,
        "description": "Профессиональная SAR стратегия с многоуровневой фильтрацией",
        "market_regime_filters": {
            "chop_period": 14,
            "chop_threshold": 40,
            "adx_period": 14,
            "adx_threshold": 25,
            "atr_period": 14,
            "atr_multiplier": 1.25
        },
        "psar_settings": {
            "psar_start": 0.02,
            "psar_step": 0.02,
            "psar_max": 0.2
        },
        "confirmation_indicators": {
            "rsi_period": 14,
            "rsi_overbought": 70,
            "rsi_oversold": 30,
            "macd_fast": 12,
            "macd_slow": 26,
            "macd_signal": 9,
            "mfi_period": 14,
            "mfi_overbought": 80,
            "mfi_oversold": 20,
            "aroon_period": 25
        },
        "macro_trend_filter": {
            "ema_short": 50,
            "ema_long": 200,
            "timeframe": "1H"
        },
        "hma_rsi_trend": {
            "hma_fast_period": 14,
            "hma_slow_period": 28,
            "hma_rsi_period": 14,
            "hma_adx_threshold": 20,
            "timeframe": "4H"
        },
        "ichimoku_settings": {
            "ichimoku_conversion": 9,
            "ichimoku_base": 26,
            "ichimoku_span_b": 52,
            "ichimoku_displacement": 26
        },
        "signal_scoring": {
            "min_signal_score": 4,
            "psar_score_weight": 1,
            "divergence_score_weight": 2,
            "extreme_zone_score_weight": 1,
            "aroon_score_weight": 1,
            "macro_alignment_score_weight": 1
        },
        "risk_management": {
            "commission_rate": 0.00075,
            "min_profit_protection_multiplier": 3,
            "max_positions_per_strategy": 5,
            "position_size_multiplier": 1.0
        },
        "symbol_selection": {
            "min_daily_volume_usd": 1000000,
            "max_monitored_symbols": 50,
            "update_interval_hours": 1,
            "volume_lookback_days": 7
        },
        "shadow_system_integration": {
            "use_shadow_system": true,
            "shadow_weight": 0.3,
            "min_shadow_score": 0.4
        },
        "ml_integration": {
            "use_ml_confirmation": true,
            "ml_weight": 0.2,
            "ml_confidence_threshold": 0.6
        },
        "timeframe_settings": {
            "primary_timeframe": "5m",
            "confirmation_timeframes": [
                "15m",
                "30m",
                "1H"
            ],
            "macro_timeframe": "1H",
            "hma_timeframe": "4H"
        },
        "advanced_filters": {
            "min_atr_value": 0.0001,
            "max_spread_percentage": 0.1,
            "min_liquidity_score": 0.7,
            "correlation_filter_enabled": true,
            "max_correlation_threshold": 0.8
        },
        "performance_tracking": {
            "track_individual_components": true,
            "save_signal_history": true,
            "max_history_days": 30,
            "detailed_logging": false
        },
        "emergency_controls": {
            "max_daily_trades": 20,
            "max_consecutive_losses": 5,
            "daily_loss_limit_percentage": 3.0,
            "volatility_circuit_breaker": 5.0
        },
        "chop_threshold": 95,
        "adx_threshold": 15,
        "atr_multiplier": 1.0,
        "psar_start": 0.02,
        "psar_step": 0.02,
        "psar_max": 0.2,
        "min_signal_score": 4,
        "min_daily_volume_usd": 1000000,
        "max_monitored_symbols": 100
    },
    "strategies": {
    "lorentzian": {
      "enabled": true,
      "strategy_type": "LorentzianStrategy",


      "strategy_settings": {
        "// Основные параметры модели": "",
        "neighbors_count": 8,
        "max_bars_back": 5000,
        "feature_count": 5,
        "min_history_size": 2000,
        "force_training": true,
        "initial_data_limit": 1000,
        "save_models": true,
        "update_frequency": 20,
        "use_online_learning": true,

        "// Конфигурация признаков (как в оригинале)": "",
        "feature_1": {
          "type": "RSI",
          "paramA": 14,
          "paramB": 1
        },

        "feature_2": {
          "type": "WT",
          "paramA": 10,
          "paramB": 11,
          "_comment": "WaveTrend Classic"
        },

        "feature_3": {
          "type": "CCI",
          "paramA": 20,
          "paramB": 1,
          "_comment": "Commodity Channel Index"
        },

        "feature_4": {
          "type": "ADX",
          "paramA": 20,
          "paramB": 2,
          "_comment": "Average Directional Index"
        },

        "feature_5": {
          "type": "RSI",
          "paramA": 9,
          "paramB": 1,
          "_comment": "Второй RSI с коротким периодом"
        },

        "// Настройки фильтров": "",
        "use_volatility_filter": true,
        "use_regime_filter": true,
        "use_adx_filter": false,
        "regime_threshold": -0.1,
        "adx_threshold": 20,

        "// Настройки торговли": "",
        "use_dynamic_exits": false,
        "show_bar_predictions": true,

        "// Пороги для сигналов": "",
        "signal_confidence_threshold": 0.6,

        "// Risk management": "",
        "stop_loss_atr_multiplier": 2.0,
        "take_profit_atr_multiplier": 3.0,

        "// Дополнительные параметры": "",

        "retrain_interval": 1000,
        "use_ema_filter": false,
        "ema_period": 200,
        "use_sma_filter": false,
        "sma_period": 200
      },

      "risk_management": {
        "position_size_percent": 2.0,
        "max_positions": 1,
        "max_daily_loss_percent": 5.0,
        "max_drawdown_percent": 10.0
      },

      "timeframes": ["5m", "15m", "1h"],
      "symbols": ["BTCUSDT", "ETHUSDT", "SOLUSDT"],

      "advanced_settings": {
        "use_kernel_filter": true,
        "kernel_settings": {
          "lookback_window": 8,
          "relative_weighting": 8.0,
          "regression_level": 25,
          "lag": 2
        },

        "color_compression": 1,
        "use_worst_case_estimates": false,

        "// Альтернативные конфигурации признаков": "",
        "alternative_features": {
          "conservative": {
            "feature_1": {"type": "RSI", "paramA": 21, "paramB": 1},
            "feature_2": {"type": "WT", "paramA": 10, "paramB": 11},
            "feature_3": {"type": "CCI", "paramA": 20, "paramB": 1},
            "feature_4": {"type": "ADX", "paramA": 20, "paramB": 2},
            "feature_5": {"type": "RSI", "paramA": 14, "paramB": 1}
          },
          "aggressive": {
            "feature_1": {"type": "RSI", "paramA": 9, "paramB": 1},
            "feature_2": {"type": "WT", "paramA": 9, "paramB": 10},
            "feature_3": {"type": "CCI", "paramA": 14, "paramB": 1},
            "feature_4": {"type": "ADX", "paramA": 14, "paramB": 2},
            "feature_5": {"type": "RSI", "paramA": 7, "paramB": 1}
          },
          "scalping": {
            "feature_1": {"type": "RSI", "paramA": 7, "paramB": 1},
            "feature_2": {"type": "WT", "paramA": 5, "paramB": 7},
            "feature_3": {"type": "CCI", "paramA": 10, "paramB": 1},
            "feature_4": {"type": "ADX", "paramA": 10, "paramB": 2},
            "feature_5": {"type": "RSI", "paramA": 5, "paramB": 1}
          }
        },
        "wavetrend_3d_modes": {
          "conservative": {
            "divergence_size_percent": 60,
            "min_confidence_threshold": 0.7,
            "conflict_resolution": "skip",
            "speed_to_emphasize": "Slow"
          },
          "aggressive": {
            "divergence_size_percent": 30,
            "min_confidence_threshold": 0.5,
            "conflict_resolution": "reduce_confidence",
            "speed_to_emphasize": "Fast"
          },
          "balanced": {
            "divergence_size_percent": 40,
            "min_confidence_threshold": 0.6,
            "conflict_resolution": "reduce_confidence",
            "speed_to_emphasize": "Normal"
          }
        }
      },
      "use_wavetrend_3d": true,
      "wavetrend_3d": {
        "// Основные параметры": "",
        "oscillator_lookback": 20,
        "quadratic_mean_length": 50,

        "// Параметры осцилляторов": "",
        "fast_length": 0.75,
        "fast_smoothing": 0.45,
        "normal_length": 1.0,
        "normal_smoothing": 1.0,
        "slow_length": 1.75,
        "slow_smoothing": 2.5,

        "// Параметры дивергенций": "",
        "divergence_distance": 30,
        "divergence_size_percent": 40,

        "// Kernel параметры": "",
        "use_kernel_filter": true,
        "kernel_lookback": 8,
        "kernel_relative_weight": 8.0,
        "kernel_regression_start": 25,
        "kernel_lag": 2,

        "// Зоны перекупленности/перепроданности": "",
        "overbought_primary": 0.5,
        "overbought_secondary": 0.75,
        "oversold_primary": -0.5,
        "oversold_secondary": -0.75,

        "// Режимы работы": "",
        "use_mirror": false,
        "use_dynamic_exits": true,
        "speed_to_emphasize": "Normal",

        "// Интеграция с Lorentzian": "",
        "integration_mode": "confirmation",
        "min_confidence_threshold": 0.6,
        "conflict_resolution": "reduce_confidence",
        "signal_weight": 0.3
      }
    }
  },

  "// Глобальные настройки для Lorentzian стратегии": "",
  "lorentzian_global": {
    "data_requirements": {
      "min_candles": 2000,
      "preferred_candles": 5000,
      "max_candles": 10000
    },

    "performance_optimization": {
      "use_numba": true,
      "cache_predictions": true,
      "cache_ttl_seconds": 60,
      "parallel_processing": false
    },

    "backtesting": {
      "use_worst_case": false,
      "include_fees": true,
      "slippage_percent": 0.1
    },

    "logging": {
      "log_predictions": true,
      "log_features": false,
      "log_filters": true,
      "save_model_periodically": true,
      "model_save_interval_hours": 24
    }
  }
}